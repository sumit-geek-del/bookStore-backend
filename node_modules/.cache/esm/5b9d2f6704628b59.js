let express,dbConnection,ErrorCodes;_046‍.x([["signupController",()=>signupController]]);_046‍.w("express",[["default",["express"],function(v){express=v}]]);_046‍.w("../../database/dbConnection",[["dbConnection",["dbConnection"],function(v){dbConnection=v}]]);_046‍.w("../../Constants/errorCodes",[["default",["ErrorCodes"],function(v){ErrorCodes=v}]]);


const app = express();
const users = dbConnection.users;

const signupController = app.post('/', async (req, res)=>{

    const {name, email, password} = req.body;
    if(!email){
        return res.send(401).json(ErrorCodes.emailRequired);
    }
    if(!password){
        return res.send(401).json(ErrorCodes.passwordRequired);
    }
    if(!name){
        return res.send(401).json(ErrorCodes.nameIsRequired);
    }

    

    if(email && password && name){
        try{
            const userResult = await users.create({
                name:name,
                email:email,
                password:password
            })

            if(userResult){
                return res.status(201).json(ErrorCodes.userCreated)
            }
        }catch(err){
            return res.status(500).json(ErrorCodes.internalServerError);
        }
        
    }
})

