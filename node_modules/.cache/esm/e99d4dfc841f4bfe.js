let express,dbConnection,ErrorCodes;_841‍.x([["loginController",()=>loginController]]);_841‍.w("express",[["default",["express"],function(v){express=v}]]);_841‍.w("../../database/dbConnection",[["dbConnection",["dbConnection"],function(v){dbConnection=v}]]);_841‍.w("../../Constants/errorCodes",[["default",["ErrorCodes"],function(v){ErrorCodes=v}]]);


const app = express();
const users = dbConnection.users;

const loginController = app.post('/', async (req, res)=>{

    const {email, password} = req.body;
    if(!email){
        return res.send(401).json(ErrorCodes.emailRequired);
    }
    if(!password){
        return res.send(401).json(ErrorCodes.passwordRequired);
    }

    if(email && password){
        try{
            const userResult = await users.findAll({
                raw:true
            })

            if(userResult.length>0){
                return res.status(200).json(ErrorCodes.loginSuccess)
            }
            else{
                return res.status(300).json(ErrorCodes.userNotFound);
            }
        }catch(err){
            return res.status(500).json(ErrorCodes.internalServerError);
        }
        
    }
})

